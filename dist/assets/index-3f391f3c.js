import{cS as k,r as h,cU as y,cV as x,cW as A,R as c,M as p,v as j,u as B,g as C,G as _,j as t,F as O,dm as I,eq as U}from"./index-b4b9f8f0.js";import{C as F}from"./Google-53276baf.js";const P=n=>{const s={uploadBlob:e=>n(new y().commandThunt(x.Project.UPLOAD_BLOB,e)),getProjectInfo:e=>n(new y().queryThunt(A.Project.GET_PROJECT_INFO,e)),updateProject:e=>n(new y().commandThunt(x.Project.UPDATE_PROJECT,e))};return{...s,updateProject:async e=>(await s.updateProject(e),await s.getProjectInfo())}};function M(){const n=k(),s=h.useCallback(P(n).uploadBlob,[n]),e=h.useCallback(P(n).getProjectInfo,[n]),f=h.useCallback(P(n).updateProject,[n]);return{selectors:{},actions:{updateProject:f,getProjectInfo:e,uploadBlob:s},state:{},hooks:{},functions:{}}}function R({project:n}){const s=c.useMemo(p().Layouts.Sections.V1),e=c.useMemo(p().FormComponents.TextBox),f=c.useMemo(p().ButtonLoader),[l,o]=c.useState({id:j(),...n}),[u,m]=c.useState(!1),{translate:g,getLabel:r}=B(),{actions:{getProjectInfo:d,updateProject:S}}=M();h.useEffect(()=>{m(!0),d().then(i=>{o(i.data),m(!1)})},[]);function b(){m(!0),S(l).then(i=>{o(i.data),m(!1)})}return C(_,{container:!0,style:{justifyContent:"center"},children:[C(_,{container:!0,item:!0,style:{flexWrap:"nowrap"},children:[C(s,{title:"Project Settings",xs:9,sm:9,children:[t(e,{label:g(r,"Name"),value:l.name,onChange:i=>o({...l,name:i.target.value}),field:"name",validation:[]}),t(e,{label:g(r,"Base URL"),value:l.base_url,onChange:i=>o({...l,base_url:i.target.value}),field:"base_url",validation:[]}),t(e,{label:g(r,"Contact Mail"),value:l.contact_mail,onChange:i=>o({...l,contact_mail:i.target.value}),field:"contact_mail",validation:[]}),t(e,{label:g(r,"Auth URL"),value:l.auth_url,onChange:i=>o({...l,auth_url:i.target.value}),field:"auth_url",validation:[]}),t(e,{label:g(r,"Description"),value:l.description,onChange:i=>o({...l,description:i.target.value}),field:"description",validation:[]})]}),t(s,{title:"Color Settings",xs:3,sm:3,children:t(F,{disableAlpha:!0,color:l.theme_color?l.theme_color:"#666666",onChangeComplete:({hex:i})=>o({...l,theme_color:i})})})]}),t(f,{onClick:b,size:"md",color:"primary",value:g(r,"ACTION_BUTTON_SAVE"),isLoading:u})]})}function T({project_logo:n,project_logo_dest:s}){const e=c.useMemo(p().IconButton);let f;const[l,o]=c.useState([]),{actions:{uploadBlob:u}}=M();c.useEffect(()=>{o(n)},[n]);function m(){f.click()}function g(d){const S=d.target.files,b=[];for(let i=0;i<S.length;i++){const a=S[i],L=new window.FileReader;L.readAsDataURL(a),L.onload=()=>{const E={name:a.name,type:a.type,size:Math.round(a.size/1e3)+" kB",base64:L.result,file:a};if(b.push(E),b.length==S.length){const v={};v.id=j(),v.blob=b[0].base64.split("base64,")[1],v.type=b[0].type,v.dest=s,u(v),o(b[0])}}}}const r=n?window.env.BLOB_URL+"/blob/"+n.blob_id:"";return C(O,{children:[t(_,{onClick:m,style:{width:"inherit"},children:l==null?r?t("img",{src:r,style:{width:"inherit"}}):t(e,{children:t(I,{})}):t("img",{src:l.base64?l.base64:r,style:{width:"inherit"}})}),t("input",{type:"file",ref:d=>f=d,style:{display:"none"},onChange:g})]})}function V({project:n}){const s=c.useMemo(p().Layouts.Sections.V1),[e,f]=c.useState({id:j(),...n}),[l,o]=c.useState(!1),{actions:{getProjectInfo:u}}=M();return h.useEffect(()=>{o(!0),u().then(m=>{f(m.data),o(!1)})},[]),!l&&C(_,{container:!0,item:!0,style:{flexWrap:"nowrap"},children:[t(_,{container:!0,item:!0,xs:4,style:{justifyContent:"center"},children:t(s,{title:"Logo",children:t(T,{project_logo:e.logo,project_logo_dest:"blob_logo_id"})})}),t(_,{container:!0,item:!0,xs:4,style:{justifyContent:"center"},children:t(s,{title:"Logo Vertical",children:t(T,{project_logo:e.logo_ver,project_logo_dest:"blob_logo_ver_id"})})}),t(_,{container:!0,item:!0,xs:4,style:{justifyContent:"center"},children:t(s,{title:"Logo Horizontal",children:t(T,{project_logo:e.logo_hor,project_logo_dest:"blob_logo_hor_id"})})})]})}const w=n=>{const s={upsertSeo:e=>n(new y().commandThunt(x.Seo.UPSERT_SEO,e)),getSeo:e=>n(new y().queryThunt(A.Seo.GET_SEO,e))};return{...s,upsertSeo:async e=>(await s.upsertSeo(e),await s.getSeo())}};function D(){const n=k(),s=h.useCallback(w(n).upsertSeo,[n]),e=h.useCallback(w(n).getSeo,[n]);return{selectors:{},actions:{upsertSeo:s,getSeo:e},state:{},hooks:{},functions:{}}}function N({seo:n}){const s=c.useMemo(p().Layouts.Sections.V1),e=c.useMemo(p().FormComponents.TextBox),f=c.useMemo(p().FormComponents.Checkbox),l=c.useMemo(p().ButtonLoader),[o,u]=c.useState({id:j(),...n}),[m,g]=c.useState(!1),{translate:r,getLabel:d}=B(),{actions:{getSeo:S,upsertSeo:b}}=D();h.useEffect(()=>{g(!0),S().then(a=>{u(a.data[0]),g(!1)})},[]);function i(){g(!0),b(o).then(a=>{u(a.data[0]),g(!1)})}return C(_,{container:!0,style:{justifyContent:"center"},children:[C(s,{title:"Open Graph Settings",xs:12,sm:12,children:[t(e,{label:r(d,"Facebook App"),value:o.fb_app_id,onChange:a=>u({...o,fb_app_id:a.target.value}),field:"fb_app_id",validation:[]}),t(e,{label:r(d,"URL"),value:o.fb_url,onChange:a=>u({...o,fb_url:a.target.value}),field:"fb_url",validation:[]}),t(e,{label:r(d,"Title"),value:o.fb_title,onChange:a=>u({...o,fb_title:a.target.value}),field:"fb_title",validation:[]}),t(e,{label:r(d,"Type"),value:o.fb_type,onChange:a=>u({...o,fb_type:a.target.value}),field:"fb_type",validation:[]}),t(e,{label:r(d,"Image URL"),value:o.fb_image,onChange:a=>u({...o,fb_image:a.target.value}),field:"fb_image",validation:[]}),t(e,{label:r(d,"Description"),value:o.fb_description,onChange:a=>u({...o,fb_description:a.target.value}),field:"fb_description",validation:[]}),t(e,{label:r(d,"Site Name"),value:o.fb_site_name,onChange:a=>u({...o,fb_site_name:a.target.value}),field:"fb_site_name",validation:[]}),t(f,{label:r(d,"Sietmap generator"),value:o.sitemap_gen,onChange:a=>u({...o,sitemap_gen:a.target.checked})})]}),t(l,{onClick:i,size:"md",color:"primary",value:r(d,"ACTION_BUTTON_SAVE"),isLoading:m})]})}function q(){const n=c.useMemo(p().Layouts.Containers.V1),s=c.useMemo(p().Layouts.Tab.V1),{translate:e,getLabel:f}=B();return t(_,{container:!0,style:{justifyContent:"center"},children:t(n,{title:"Project Settings",icon:t(U,{}),xs:12,sm:12,children:t(s,{defaultTab:0,tabConfig:[{label:e(f,"Project"),render:()=>t(R,{})},{label:e(f,"SEO"),render:()=>t(N,{})},{label:e(f,"LOGO"),render:()=>t(V,{})}]})})})}export{q as default};
