import{O as L,R as o,m as k,M as l,l as M,Z as R,j as e,dg as b,aa as P,$ as D,G as h,dj as F,c_ as A,cZ as G,c$ as O,ab as T}from"./index-9bb41de4.js";import{d as j}from"./Extension-41be99dc.js";import{u as E}from"./hook-b5ae3ccf.js";import"./createSvgIcon-9815349b.js";const I=({type:r})=>({columns:[{titleToken:"CREATED AT",field:"createdAt",type:"date",isActive:!0},{titleToken:"GROUP",field:"group",isActive:!0},{titleToken:"TITLTE",field:"title",isActive:!0},{titleToken:"URL",field:"url",isActive:!0},{titleToken:"ROUTE GROUP",field:"route_group",isActive:!0},{titleToken:"URL EXACT",field:"url_exact",isActive:!0,type:"checkbox"},{titleToken:"HOMEPAGE",field:"is_homepage",isActive:!0,type:"checkbox"},{titleToken:"ACTIVATE",field:"is_active",isActive:!0,type:"checkbox"},{titleToken:"LAYOUT",field:"layout_plugin_name",isActive:!0}],enableGrouping:!0,detailPanelPlugin:"mapps-cms-page-list-details-preview"});function V({cmsPage:r,setCmsPage:p}){const{translate:i,getLabel:n}=L(),f=o.useMemo(()=>k.byName("mapps-component-translate-component").component,[]),u=o.useMemo(()=>k.byType("mapps-io-page-layout"),[]),c=o.useMemo(l().Layouts.Sections.V1),d=o.useMemo(l().FormComponents.DropDownList),[t,s]=o.useState({...r});o.useEffect(()=>{p(t)},[t]);function m(a){t.translation_id||(t.translation_id=D()),a.id||(a.id=t.translation_id),s({...t,translation:a})}function C(){return[{id:"",name:""},...u].map(a=>({id:a.name,value:a.layout?a.layout.name:a.name}))}return M(R,{children:[M(c,{title:"Cms Page",children:[e(b,{label:i(n,"Title Token"),value:t.title,onChange:a=>{s({...t,title:a.target.value})},field:"title",validation:[]}),e(b,{label:i(n,"URL"),value:t.url,onChange:a=>{s({...t,url:a.target.value})},field:"url",validation:[]}),e(d,{label:"Layout",valueOptions:C(),value:t.layout_plugin_name,onChange:a=>{s({...t,layout_plugin_name:a.target.value})},field:"type",validation:[]}),e(b,{disabled:!0,label:i(n,"Layout Plugin"),value:t.layout_plugin_name,onChange:a=>{s({...t,layout_plugin_name:a.target.value})},field:"layout_plugin_name",validation:[]}),e(b,{label:i(n,"Route Group"),value:t.route_group,onChange:a=>{s({...t,route_group:a.target.value})},field:"route_group",validation:[]}),e(P,{label:i(n,"Exact"),value:t.url_exact,onChange:a=>{s({...t,url_exact:a.target.checked})},field:"url_exact",validation:[]}),e(P,{label:i(n,"Is Homepage"),value:t.is_homepage,onChange:a=>{s({...t,is_homepage:a.target.checked})},field:"is_homepage",validation:[]}),e(P,{label:i(n,"Is active"),value:t.is_active,onChange:a=>{s({...t,is_active:a.target.checked})},field:"is_active",validation:[]})]}),e(c,{title:"Page Title Translation",children:e(f,{translation:t.translation||{},setTranslate:m,i:!0})})]})}function B({cmsPage:r,setCmsPage:p}){const i=o.useMemo(l().Layouts.Tab.V1),[n,f]=o.useState({...r});return o.useEffect(()=>{p(n)},[n]),e(h,{container:!0,children:e(i,{defaultTab:0,tabConfig:[{label:"CMS ",render:()=>e(F,{mode:"json",theme:"monokai",value:n.cms,onChange:u=>{f({...n,cms:u})},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,width:"100%",height:"80vh"},showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2}},1)}]})})}function S({cmsPageId:r}){const p=o.useMemo(l().ButtonLoader),i=o.useMemo(l().Layouts.Groups.V1),n=o.useMemo(l().Layouts.Tab.V1),f=A(),{translate:u,getLabel:c}=L(),[d,t]=o.useState(!0),[s,m]=o.useState({}),{selectors:{getCmsPageIdReducer:C},actions:{upsertCmsPage:a},hooks:{setCmsPageId:y}}=E();o.useEffect(()=>{r?y(r):(m({id:D()}),t(!1))},[]),o.useEffect(()=>{C&&(m(C),t(!1))},[C]);async function _(){await a(s),f.actions.closeDrawer()}return!d&&M(h,{container:!0,children:[e(i,{xs:12,sm:6,title:"CMS Page Details",children:e(b,{label:u(c,"Page Token Title"),value:s.title,field:"title",disabled:!0,validation:[]})}),e(n,{defaultTab:0,tabConfig:[{label:"Details",render:()=>e(V,{cmsPage:{...s},setCmsPage:m})},{label:"CMS JSON",render:()=>e(B,{cmsPage:{...s},setCmsPage:m})}]}),e(h,{style:{marginLeft:"1rem",marginBottom:"1rem"},children:e(p,{color:"primary",onClick:_,value:u(c,"Save"),variant:"outlined"})})]})}function N(){const r=o.useMemo(l().ConfirmationDialog),[p,i]=o.useState(!0),n=o.useMemo(l().Layouts.Table.V2),f=o.useMemo(l().Layouts.Containers.V1);o.useMemo(l().Layouts.Tab.V1);const u=o.useMemo(l().ButtonLoader),{actions:c}=A(),d=G(),{translate:t,getLabel:s}=L(),{selectors:{cmsPagesAdminReducer:m},actions:{getCmsPage:C,deleteCmsPage:a}}=E();o.useEffect(()=>{i(!0),Promise.all([C()]).then(g=>{i(!1)})},[]);function y(){c.openDrawer(!0,e(h,{style:{width:"50vw",display:"flex"},children:e(S,{})}),"right")}function _(g,v){c.openDrawer(!0,e(h,{style:{width:"50vw",display:"flex"},children:e(S,{cmsPageId:v.id})}),"right")}function w(g,v){d.actions.openDialog(!0,e(r,{title:"Duplicate CMS Element",description:`Do you want to duplicate ${v.token} element?`,onConfirm:async()=>{d.actions.closeDialog(),i(!0),i(!1)}}))}function x(g,v){d.actions.openDialog(!0,e(r,{title:"Delete CMS Page",description:`Do you want to delete ${v.title} page?`,onConfirm:async()=>{d.actions.closeDialog(),i(!0),await a(v),i(!1)}}))}return e(h,{container:!0,style:{justifyContent:"center"},children:e(f,{title:"CMS Pages",icon:e(j,{}),xs:12,sm:12,children:e(n,{freeActions:[e(u,{size:"small",value:t(s,"Create Page"),variant:"outlined",onClick:y,startIcon:e(O,{})},1)],isLoading:p,title:"Manage CMS Pages",pageSize:20,...I({}),data:m.cms||[],actions:[g=>({icon:T.Edit,label:"Edit",onClick:_,hidden:!g.project_id}),g=>({icon:T.Delete,label:"Delete",onClick:x,hidden:!g.project_id}),g=>({icon:T.Save,label:"CMS",onClick:w})]})})})}export{N as default};
