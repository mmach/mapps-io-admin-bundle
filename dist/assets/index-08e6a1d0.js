import{r as k,b as S,i as I,c as R,R as d,u as U,de as W,M as P,df as z,j as t,dg as G,g as c,F as H,G as l,d5 as J,dh as K,da as _,db as E,dc as h,di as Q,dj as V,dk as X}from"./index-96500733.js";import{u as Y}from"./hook-80a9159c.js";import{u as Z}from"./hook-be5a0287.js";var m={},ee=I,te=R;Object.defineProperty(m,"__esModule",{value:!0});var T=m.default=void 0,ae=te(k),re=ee(S()),se=(0,re.default)(ae.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");T=m.default=se;var C={},ne=I,oe=R;Object.defineProperty(C,"__esModule",{value:!0});var $=C.default=void 0,ie=oe(k),de=ne(S()),ce=(0,de.default)(ie.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");$=C.default=ce;function ge({selectionMode:p,onClick:F,selectedCategories:b=[]}){const{state:{},functions:{setTitle:M,setIcon:q}}=Y(),[n,B]=d.useState(""),{translate:y,getLabel:v}=U(),{selectors:{getCategoryTypes:o,getAllCategoryOptionsReducer:i},actions:{expandCategoryOptionsType:L}}=Z(),O=W(),N=d.useMemo(P().ButtonLoader),x=z(),u=d.useMemo(()=>new URLSearchParams(x.search).get("catOptionId"),[x.search]);d.useEffect(()=>{M("Category Options List"),q(t(G,{}))},[]),d.useEffect(()=>{if(i.length>0&&o.length>0){const e=i.find(r=>r.id==u);if(e){const r=o.find(s=>s.id==e.cot_id);r.expanded||L(r.id)}}},[u,i,o]);function j(e){const r=e.currentTarget.dataset.tag;this.props.removeCategoryOptions({id:r}).then(()=>{this.props.getCategoryOptions(),this.setState({categoryOptions:this.state.categoryOptions.filter(s=>s.id!=r)})})}function w(e){L(e.currentTarget.dataset.key)}function A(e){if(p)F(e);else{const r=e.currentTarget.dataset.key;O(`/mapps/categories/categoriesOptions?catOptionId=${r}`)}}function D(e){O("/mapps/categories/categoriesOptions?catOptionId=new")}return c(H,{children:[!p&&t(l,{children:t(N,{color:"primary",onClick:D,value:y(v,"Create"),startIcon:t(J,{}),variant:"outlined"})}),t(l,{style:{paddingTop:0,paddingBottom:0},children:t(K,{label:y(v,"CODE_FILTER_LABEL"),value:n,onChange:e=>B(e.target.value)})}),t(_,{className:"mapps-io-list-link",children:Array.isArray(o)&&o.filter((e,r)=>i.filter(g=>g.cot_id==e.id).length>0).map((e,r)=>{const s=i.filter(a=>a.cot_id==e.id),g=s.filter(a=>String(a.name.toLowerCase()).startsWith(n.toLowerCase())||String(a.name.toLowerCase()).indexOf(n.toLowerCase())>0);return c(l,{className:"mapps-io-list-item",children:[c(E,{button:!0,"data-key":e.id,onClick:w,className:e.expanded&&"selected",children:[t(h,{children:e.name}),t(l,{className:"mapps-io-list-item-description",children:g.length+" / "+s.length}),e.expanded?t(T,{}):t($,{})]}),t(Q,{"data-key":e.id,in:e.expanded,timeout:"auto",unmountOnExit:!0,children:t(_,{className:"mapps-io-list-link-collapse mapps-io-list-item ",children:s.sort((a,f)=>String(a.code)>String(f.code)?1:-1).map((a,f)=>{if(String(a.name).toUpperCase().startsWith(n.toUpperCase())||String(a.name).toUpperCase().indexOf(n.toUpperCase())>0)return c(E,{className:a.status?u==a.id&&"selected":"primary",button:!0,disabled:b.includes(a.id),"data-key":a.id,onClick:A,children:[t(h,{children:t(h,{children:a.name})}),!p&&t(V,{children:t(X,{"data-tag":a.id,onClick:j})})]},f)})})})]},r)})})]})}export{ge as C};
