import{a as O,L as w,i as N,N as U,R as s,M as R,m as k,W as D,X as F,Q as j,O as q,Y as B,j as a,U as i,l as E,a9 as G}from"./index-9bb41de4.js";var u={},W=N,z=U;Object.defineProperty(u,"__esModule",{value:!0});var P=u.default=void 0,$=z(O),H=W(w()),Q=(0,H.default)($.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");P=u.default=Q;function Y(V){const d=s.useMemo(R().IconButton),m=s.useMemo(()=>k.byName("mapps-component-tooltip").component),M=s.useMemo(R().Image),[o,S]=s.useState([]),{selectors:{userProfileImageReducer:n=n},actions:{removeImage:p=p,setAsProfile:g=g,setLoading:c=c,uploadImage:C=C,getUserImages:f=f}}=D(),{actions:{openLightbox:I=I}}=F(),{selectors:{userProfileReducer:t=t},actions:{getUserInfo:_=_}}=j(),{getLabel:h,translate:v}=q(),{selectors:{authReducer:l=l},actions:{setAuthContext:x=x}}=B();s.useEffect(()=>{S(n.images)},[n.images]);const b=s.useMemo(()=>l.user.id==t.user.id,[t.user.id]);async function y(){let e=await _(t.user.id);e.data.id==l.user.id&&x(e.data)}async function T(e){const r=e.currentTarget.dataset.tag;await p({id:r}),await f({user_id:t.user.id}),await y()}async function L(e){c(!0),await g({blob_id:e.currentTarget.dataset.tag}),await y(),c(!1)}function A(e){o.forEach(r=>{r.id==e.currentTarget.dataset.tag&&I(r,o)})}return a(i,{className:"mapps-user-images-container",style:{display:"flex",flexDirection:"column",placeItems:"center",margin:16},children:a(i,{container:!0,spacing:3,className:"mapps-user-images-list",children:o.map(e=>E(i,{item:!0,xs:2,className:"mapps-user-images-list-item",children:[b&&E(i,{style:{marginBottom:"15px",display:"flex",justifyContent:"right"},children:[e.id!=t.user.blob_id&&b&&a(m,{title:v(h,"USER_SET_AS_PROFILE_IMAGE_TOOLTIP"),children:a(d,{className:"mapps-user-images-list-item-set-as-profile","data-tag":e.id,onClick:L,style:{marginTop:"-3px",cursor:"pointer"},children:a(P,{})})}),a(m,{title:v(h,"USER_REMOVE_IMAGE_TOOLTIP"),children:a(d,{className:"mapps-user-images-list-item-remove-button","data-tag":e.id,style:{cursor:"pointer"},onClick:T,children:a(G,{})})})]}),a(M,{className:"mapps-user-images-list-item-image",animationDuration:1e3,"data-tag":e.id,onClick:A,src:window.env.BLOB_URL+"/blob/"+e.blob_thumbmail_id,style:{cursor:"pointer"}})]},e.id))})})}export{Y as default};
