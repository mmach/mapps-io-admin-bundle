import{d8 as he,a as d,d9 as ve,da as ye,db as Ee,dc as xe,_ as W,n as Ce,bu as _e,dd as Re,d0 as G,i as Z,N as J,R as $,O as Le,de as Se,M as Te,df as Oe,j as i,l as H,Z as $e,G as z,c$ as be,dg as we,d4 as te,d5 as ae,d6 as U}from"./index-9bb41de4.js";import{d as Ie}from"./AccountTree-49be4c05.js";import{u as Me}from"./hook-ee942a67.js";import{u as De}from"./hook-55df9c1d.js";import{g as ne}from"./utils-15a7aa19.js";import{I as ke}from"./IconButton-6f0b722e.js";var Ne=function(t){return{root:{height:0,overflow:"hidden",transition:t.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}},re=d.forwardRef(function(t,F){var P=t.children,u=t.classes,m=t.className,_=t.collapsedHeight,R=t.collapsedSize,v=R===void 0?"0px":R,p=t.component,g=p===void 0?"div":p,L=t.disableStrictModeCompat,b=L===void 0?!1:L,w=t.in,S=t.onEnter,y=t.onEntered,I=t.onEntering,M=t.onExit,q=t.onExited,D=t.onExiting,e=t.style,s=t.timeout,o=s===void 0?ve.standard:s,E=t.TransitionComponent,n=E===void 0?_e:E,T=ye(t,["children","classes","className","collapsedHeight","collapsedSize","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),j=Ee(),X=d.useRef(),h=d.useRef(null),A=d.useRef(),k=typeof(_||v)=="number"?"".concat(_||v,"px"):_||v;d.useEffect(function(){return function(){clearTimeout(X.current)}},[]);var N=j.unstable_strictMode&&!b,B=d.useRef(null),de=xe(F,N?B:void 0),x=function(r){return function(l,c){if(r){var f=N?[B.current,l]:[l,c],O=Re(f,2),Y=O[0],ee=O[1];ee===void 0?r(Y):r(Y,ee)}}},le=x(function(a,r){a.style.height=k,S&&S(a,r)}),ce=x(function(a,r){var l=h.current?h.current.clientHeight:0,c=ne({style:e,timeout:o},{mode:"enter"}),f=c.duration;if(o==="auto"){var O=j.transitions.getAutoHeightDuration(l);a.style.transitionDuration="".concat(O,"ms"),A.current=O}else a.style.transitionDuration=typeof f=="string"?f:"".concat(f,"ms");a.style.height="".concat(l,"px"),I&&I(a,r)}),ue=x(function(a,r){a.style.height="auto",y&&y(a,r)}),pe=x(function(a){var r=h.current?h.current.clientHeight:0;a.style.height="".concat(r,"px"),M&&M(a)}),fe=x(q),me=x(function(a){var r=h.current?h.current.clientHeight:0,l=ne({style:e,timeout:o},{mode:"exit"}),c=l.duration;if(o==="auto"){var f=j.transitions.getAutoHeightDuration(r);a.style.transitionDuration="".concat(f,"ms"),A.current=f}else a.style.transitionDuration=typeof c=="string"?c:"".concat(c,"ms");a.style.height=k,D&&D(a)}),ge=function(r,l){var c=N?r:l;o==="auto"&&(X.current=setTimeout(c,A.current||0))};return d.createElement(n,W({in:w,onEnter:le,onEntered:ue,onEntering:ce,onExit:pe,onExited:fe,onExiting:me,addEndListener:ge,nodeRef:N?B:void 0,timeout:o==="auto"?null:o},T),function(a,r){return d.createElement(g,W({className:Ce(u.root,u.container,m,{entered:u.entered,exited:!w&&k==="0px"&&u.hidden}[a]),style:W({minHeight:k},e),ref:de},r),d.createElement("div",{className:u.wrapper,ref:h},d.createElement("div",{className:u.wrapperInner},P)))})});re.muiSupportAuto=!0;const He=he(Ne,{name:"MuiCollapse"})(re);var K={},ze=Z,Fe=J;Object.defineProperty(K,"__esModule",{value:!0});var ie=K.default=void 0,Pe=Fe(d),qe=ze(G()),je=(0,qe.default)(Pe.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");ie=K.default=je;var Q={},Ae=Z,Be=J;Object.defineProperty(Q,"__esModule",{value:!0});var oe=Q.default=void 0,We=Be(d),Ue=Ae(G()),Ge=(0,Ue.default)(We.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");oe=Q.default=Ge;var V={},Ze=Z,Je=J;Object.defineProperty(V,"__esModule",{value:!0});var se=V.default=void 0,Ke=Je(d),Qe=Ze(G()),Ve=(0,Qe.default)(Ke.createElement("path",{d:"M19 13H5v-2h14v2z"}),"Remove");se=V.default=Ve;function rt({selectionMode:C,onClick:t,selectedCategories:F=[]}){const{state:{},functions:{setTitle:P,setIcon:u}}=Me(),[m,_]=$.useState(""),{translate:R,getLabel:v}=Le(),{selectors:{getCategoryTypes:p,getAllCategoryOptionsReducer:g},actions:{expandCategoryOptionsType:L}}=De(),b=Se(),w=$.useMemo(Te().ButtonLoader),S=Oe(),y=$.useMemo(()=>new URLSearchParams(S.search).get("catOptionId"),[S.search]);$.useEffect(()=>{P("Category Options List"),u(i(Ie,{}))},[]),$.useEffect(()=>{if(g.length>0&&p.length>0){const e=g.find(s=>s.id==y);if(e){const s=p.find(o=>o.id==e.cot_id);s.expanded||L(s.id)}}},[y,g,p]);function I(e){const s=e.currentTarget.dataset.tag;this.props.removeCategoryOptions({id:s}).then(()=>{this.props.getCategoryOptions(),this.setState({categoryOptions:this.state.categoryOptions.filter(o=>o.id!=s)})})}function M(e){L(e.currentTarget.dataset.key)}function q(e){if(C)t(e);else{const s=e.currentTarget.dataset.key;b(`/mapps/categories/categoriesOptions?catOptionId=${s}`)}}function D(e){b("/mapps/categories/categoriesOptions?catOptionId=new")}return H($e,{children:[!C&&i(z,{children:i(w,{color:"primary",onClick:D,value:R(v,"Create"),startIcon:i(be,{}),variant:"outlined"})}),i(z,{style:{paddingTop:0,paddingBottom:0},children:i(we,{label:R(v,"CODE_FILTER_LABEL"),value:m,onChange:e=>_(e.target.value)})}),i(te,{className:"mapps-io-list-link",children:Array.isArray(p)&&p.filter((e,s)=>g.filter(E=>E.cot_id==e.id).length>0).map((e,s)=>{const o=g.filter(n=>n.cot_id==e.id),E=o.filter(n=>String(n.name.toLowerCase()).startsWith(m.toLowerCase())||String(n.name.toLowerCase()).indexOf(m.toLowerCase())>0);return H(z,{className:"mapps-io-list-item",children:[H(ae,{button:!0,"data-key":e.id,onClick:M,className:e.expanded&&"selected",children:[i(U,{children:e.name}),i(z,{className:"mapps-io-list-item-description",children:E.length+" / "+o.length}),e.expanded?i(ie,{}):i(oe,{})]}),i(He,{"data-key":e.id,in:e.expanded,timeout:"auto",unmountOnExit:!0,children:i(te,{className:"mapps-io-list-link-collapse mapps-io-list-item ",children:o.sort((n,T)=>String(n.code)>String(T.code)?1:-1).map((n,T)=>{if(String(n.name).toUpperCase().startsWith(m.toUpperCase())||String(n.name).toUpperCase().indexOf(m.toUpperCase())>0)return H(ae,{className:n.status?y==n.id&&"selected":"primary",button:!0,disabled:F.includes(n.id),"data-key":n.id,onClick:q,children:[i(U,{children:i(U,{children:n.name})}),!C&&i(ke,{children:i(se,{"data-tag":n.id,onClick:I})})]},T)})})})]},s)})})]})}export{rt as C};
