import{M as p,j as t,C as B,R as u,u as j,m as w,G as n,T as L,g as C}from"./index-b4b9f8f0.js";import{M as E,d as T}from"./index-751a95fa.js";import"./toConsumableArray-b40f290f.js";function I({title:x,titleToken:M,type:s,field:l,isActive:f,onClick:h,pluginName:d,filtering:y}){const k=p().ButtonLoader();try{let o={field:l,type:s,titleToken:M,title:x,isActive:f,pluginName:d,filtering:y};return s=="checkbox"?o={...o,render:c=>{const i=l.split(".").reduce((a,r,m)=>a[r],c);return t(B,{style:{display:"flex"},noLabel:!0,disabled:!0,value:!!i})}}:s=="!checkbox"?o={...o,render:c=>{const i=l.split(".").reduce((a,r,m)=>a[r],c);return t(B,{style:{display:"flex"},noLabel:!0,disabled:!0,value:!i})}}:s=="button"?o={...o,render:c=>{const i=l.split(".").reduce((a,r,m)=>a[r],c);return t(k,{style:{fontSize:"0.65rem",width:"100%",margin:"0px",height:"100%"},"data-key":c.id,variant:"clean",onClick:h,value:i})}}:o={...o,render:c=>l.split(".").reduce((a,r,m)=>a[r],c)||""},o}catch(o){return console.log(o),{}}}function H({title:x,data:M,columns:s,detailsContainerPlugins:l,options:f={},freeActions:h,detailPanelPlugin:d,pageSize:y,isLoading:k,actions:o,style:c}){const{translate:i,getLabel:a}=j(),[r,m]=u.useState(s.filter(e=>e.isActive).map(e=>e.titleToken)),A=u.useMemo(()=>[...s.map(e=>I(e)).map(e=>({...e,hidden:!r.includes(e.titleToken),title:i(a,e.titleToken)}))],[r]),G=u.useMemo(p().ButtonLoader),N=u.useMemo(p().Layouts.Sections.V2),z=u.useMemo(p().JsonToGrid);u.useMemo(p().IconButton);const V=u.useMemo(()=>d&&w.byName(d).component,[d]),O=u.useMemo(()=>s.map((e,v)=>t(G,{style:{fontSize:"0.65rem",margin:"0px",height:"100%",color:r.includes(e.titleToken)?"var(--mapps-primary-color-l1)":"var(--mapps-a-default-color)"},"data-key":e.titleToken,value:i(a,e.titleToken),variant:"clean",onClick:g=>{const S=g.currentTarget.dataset.key;r.includes(S)?m(r.filter(b=>b&&b!=S)):m([...r,S].filter(b=>b))}},v)),[r,s]);try{return t(n,{container:!0,className:"mapps-io-table-container",children:t(E,{isLoading:k,icons:L,options:{pageSize:y,actionsColumnIndex:-1,...f},columns:A,data:M,title:x,actions:o,detailPanel:[l&&{icon:L.NextPage,tooltip:"Expand",iconProps:{fontSize:"small"},render:e=>(console.log(e),t(n,{className:"mapps-io-table-expanded-row",children:t(z,{...e,currentGrid:l})}))},d&&{icon:L.NextPage,tooltip:"Expand",iconProps:{fontSize:"small"},render:e=>t(n,{className:"mapps-io-table-expanded-row",children:t(V,{...e,currentGrid:l})})}].filter(e=>e),components:{Header:e=>t(n,{className:"mapps-io-table-header",children:t(T.MTableHeader,{...e})}),Body:e=>t(n,{className:"mapps-io-table-body",children:t(T.MTableBody,{...e})}),Toolbar:e=>C(n,{children:[t(T.MTableToolbar,{...e,children:t("span",{children:"KUPAA"})}),C(n,{container:!0,spaceing:3,children:[t(n,{item:!0,xs:10,children:t(N,{title:"Show columns",children:O})}),h&&t(n,{item:!0,xs:2,children:t(N,{title:"Actions",style:{width:"100%"},children:h.map((v,g)=>t(n,{children:v},g))})})]})]}),Action:e=>t(n,{children:t(T.MTableAction,{...e,size:"small"})})}})})}catch(e){return console.log(e),"OOOOPS"}}const F=u.memo(H);export{F as default};
