import{a as k,d0 as x,i as T,N as j,R as n,ee as P,S as U,c_ as q,dq as V,M as v,ef as B,O as W,j as e,G as i,ab as u,eg as z,eh as $,ei as G,l as d}from"./index-9bb41de4.js";var f={},H=T,N=j;Object.defineProperty(f,"__esModule",{value:!0});var m=f.default=void 0,Y=N(k),J=H(x()),X=(0,J.default)(Y.createElement("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"AccountBalanceWallet");m=f.default=X;function K(l){const[g,p]=n.useState(!0),[r,I]=n.useState(new Date),[b,y]=n.useState([]),h=P({}),S=U(),w=q(),A=V(),O=n.useMemo(v().Layouts.Table.V2),D=n.useMemo(v().IUA.PREVIEW.DEFAULT),c=B(),{translate:M,getLabel:F}=W();n.useEffect(()=>()=>c.actions.clean(),[]),n.useEffect(()=>{p(!0),c.actions.getInvoices({year:r.getFullYear(),month:r.getMonth(),asAdmin:!0}).then(t=>{const a=t.data.filter(o=>!h.selectors.iuaReducer.iuaRelations[o.iua.id]).map(o=>o.iua.id);if(p(!1),a.length>0)return h.actions.getIuaList(a)}).then(t=>{if(t&&t.data){const a=[...new Set(t.data.map(o=>o.category_id))];A.hooks.setCategoryIds(a)}})},[r]),n.useEffect(()=>{y([...c.selectors.invoicesAdminReducer.invoices]),console.log(c.selectors.invoicesAdminReducer.invoices)},[c.selectors.invoicesAdminReducer.invoices]);function _(t){const a=t;window.scrollTo(0,0),I(a)}function C(t,a){w.actions.openDrawer(!0,e(i,{container:!0,style:{width:1100},children:e(D,{iua_id:a.iua.id,cmsMode:"DEFAULT",device:"desktop"})}),"right")}function L(t,a){const o=a.id,s=b.filter(E=>E.id==o)[0],R={pdf_id:s.blob.blob_id,subject:M(F,"SEND_MAIL_SUBJECT",s.number_string,s.month+"/"+s.year),body:`${window.env.BLOB_URL}/blob/${s.blob.blob_id}.pdf`};S.actions.openModal(!0,e(G,{...R}))}return e(i,{container:!0,style:{justifyContent:"center"},children:e(O,{isLoading:g,icons:u,freeActions:[e(z,{variant:"month",label:"Month",dateFormat:"MM/yyyy",showMonthYearPicker:!0,value:r,onChange:_})],...$({}),actions:[t=>({icon:u.OpenIn,label:"Open IUA",onClick:C}),t=>({icon:u.PictureAsPdf,label:"Open Invoice",onClick:L})],data:b.sort((t,a)=>new Date(a.createdAt)>new Date(t.createdAt)).map(t=>({...t,info:{number:t.number}})),title:"Invoices List"})})}function Z(){const l=n.useMemo(v().Layouts.Containers.V1);return d(i,{container:!0,style:{justifyContent:"center"},children:[d(l,{title:"TODOOOO",icon:e(m,{}),xs:12,sm:12,children:["TODOOOOOOs",d(i,{children:["Income/Outcome types,",e("br",{}),"Fill auto get incoide or manual invoice flag,",e("br",{}),"Allow to gen manual invoice,",e("br",{}),"Allow edit only manual invoice,",e("br",{}),"link income / outcome invoices,",e("br",{}),"Snapshot for user invoice information values",e("br",{}),"FIX backend to gen invoice based on inputs",e("br",{}),"Socket for invoice status change",e("br",{})]}),e(i,{children:"Income - include fees and tax, Outcome - price with tax"}),e(i,{children:"Calculate summary income for all fees"})]}),e(l,{title:"Invoices",icon:e(m,{}),xs:12,sm:12,children:e(K,{})})]})}export{Z as default};
