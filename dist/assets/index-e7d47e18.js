import{R as a,m as d,M as F,O,Q as U,a1 as M,Y as G,l as S,Z as w,U as n,j as t,a3 as x}from"./index-9bb41de4.js";const D="/assets/user-c7774c07.svg";function k(){const y=a.useMemo(()=>d.byName("mapps-component-map-form").component),b=a.useMemo(()=>d.byName("mapps-component-map-form-details").component),L=a.useMemo(()=>d.byName("mapps-component-button-loader").component),c=a.useMemo(F().Layouts.Groups.V1),[C,u]=a.useState(!1),[N,l]=a.useState(!1),[s,m]=a.useState({}),{translate:r,getLabel:i,getSuccessGlobal:E}=O(),{selectors:{userProfileReducer:e=e},actions:{getUserInfo:p=p}}=U(),{actions:{setSnackbar:f=f}}=M(),{actions:{setLatLng:_=_,getAuthorizedUserInfo:A=A,setAuthContext:h=h}}=G();a.useEffect(()=>{u(!1),e.user&&e.user.id&&(m({address:{postcode:e.user.zipcode,road:e.user.address,city_id:e.user.city_id,city:e.user.cite,country_id:e.user.country_id,state:e.user.state,neighbourhood:e.user.neighbourhood,flat_number:e.user.flat_number,house_number:e.user.house_number},place_id:e.user.place_id,lon:e.user.longitude,lat:e.user.latitude}),u(!0))},[e.user.id]);async function I(){l(!0),await _({longitude:s.lon,latitude:s.lat,zipcode:s.address.postcode,address:s.address.road,city_id:s.address.city_id,city:s.address.city,country_id:s.address.country_id,state:s.address.state,neighbourhood:s.address.neighbourhood,flat_number:s.address.flat_number,house_number:s.address.house_number,place_id:s.place_id});const o=await p(e.user.id);await h(o.data,localStorage.token,localStorage.refresh_token),l(!1),f(x.CODE.SUCCESS_GLOBAL,r(E,"SET_LANG_SAVE_SUCCESS"))}function g(o){o&&o.address&&m(o)}return C&&S(w,{children:[S(n,{style:{display:"flex",flexDirection:"row"},children:[t(c,{title:r(i,"USER_INFO_LOCATION_SEARCH"),children:t(n,{className:"mapps-form mapps-set-localisation-form-input",style:{display:"grid",width:"100%",height:500},children:t(y,{className:"mapps-user-profile-set-localisation",data:s,pinIcon:D,onChange:g})})}),t(c,{title:r(i,"USER_INFO_LOCATION_DETAILS"),children:t(n,{className:"mapps-form mapps-set-localisation-form-details",style:{display:"grid",width:"100%"},children:t(b,{data:s,onChange:g})})})]}),t(n,{className:"mapps-form-actions mapps-set-localisation-form-button",children:t(L,{onClick:I,color:"primary",size:"medium",value:r(i,"SUBMIT"),isLoading:N})})]})}export{k as default};
