import{u as L,R as o,m as k,M as l,g as M,F,j as e,dd as y,C as _,v as D,G as h,dj as R,c$ as A,cZ as G,ew as j,d1 as I,T as P}from"./index-b2bea69e.js";import{u as E}from"./hook-b477a889.js";const O=({type:u})=>({columns:[{titleToken:"CREATED AT",field:"createdAt",type:"date",isActive:!0},{titleToken:"GROUP",field:"group",isActive:!0},{titleToken:"TITLTE",field:"title",isActive:!0},{titleToken:"URL",field:"url",isActive:!0},{titleToken:"ROUTE GROUP",field:"route_group",isActive:!0},{titleToken:"URL EXACT",field:"url_exact",isActive:!0,type:"checkbox"},{titleToken:"HOMEPAGE",field:"is_homepage",isActive:!0,type:"checkbox"},{titleToken:"ACTIVATE",field:"is_active",isActive:!0,type:"checkbox"},{titleToken:"LAYOUT",field:"layout_plugin_name",isActive:!0}],enableGrouping:!0,detailPanelPlugin:"mapps-cms-page-list-details-preview"});function V({cmsPage:u,setCmsPage:p}){const{translate:i,getLabel:n}=L(),f=o.useMemo(()=>k.byName("mapps-component-translate-component").component,[]),r=o.useMemo(()=>k.byType("mapps-io-page-layout"),[]),c=o.useMemo(l().Layouts.Sections.V1),d=o.useMemo(l().FormComponents.DropDownList),[t,s]=o.useState({...u});o.useEffect(()=>{p(t)},[t]);function g(a){t.translation_id||(t.translation_id=D()),a.id||(a.id=t.translation_id),s({...t,translation:a})}function C(){return[{id:"",name:""},...r].map(a=>({id:a.name,value:a.layout?a.layout.name:a.name}))}return M(F,{children:[M(c,{title:"Cms Page",children:[e(y,{label:i(n,"Title Token"),value:t.title,onChange:a=>{s({...t,title:a.target.value})},field:"title",validation:[]}),e(y,{label:i(n,"URL"),value:t.url,onChange:a=>{s({...t,url:a.target.value})},field:"url",validation:[]}),e(d,{label:"Layout",valueOptions:C(),value:t.layout_plugin_name,onChange:a=>{s({...t,layout_plugin_name:a.target.value})},field:"type",validation:[]}),e(y,{disabled:!0,label:i(n,"Layout Plugin"),value:t.layout_plugin_name,onChange:a=>{s({...t,layout_plugin_name:a.target.value})},field:"layout_plugin_name",validation:[]}),e(y,{label:i(n,"Route Group"),value:t.route_group,onChange:a=>{s({...t,route_group:a.target.value})},field:"route_group",validation:[]}),e(_,{label:i(n,"Exact"),value:t.url_exact,onChange:a=>{s({...t,url_exact:a.target.checked})},field:"url_exact",validation:[]}),e(_,{label:i(n,"Is Homepage"),value:t.is_homepage,onChange:a=>{s({...t,is_homepage:a.target.checked})},field:"is_homepage",validation:[]}),e(_,{label:i(n,"Is active"),value:t.is_active,onChange:a=>{s({...t,is_active:a.target.checked})},field:"is_active",validation:[]})]}),e(c,{title:"Page Title Translation",children:e(f,{translation:t.translation||{},setTranslate:g,i:!0})})]})}function B({cmsPage:u,setCmsPage:p}){const i=o.useMemo(l().Layouts.Tab.V1),[n,f]=o.useState({...u});return o.useEffect(()=>{p(n)},[n]),e(h,{container:!0,children:e(i,{defaultTab:0,tabConfig:[{label:"CMS ",render:()=>e(R,{mode:"json",theme:"monokai",value:n.cms,onChange:r=>{f({...n,cms:r})},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,width:"100%",height:"80vh"},showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!0,tabSize:2}},1)}]})})}function S({cmsPageId:u}){const p=o.useMemo(l().ButtonLoader),i=o.useMemo(l().Layouts.Groups.V1),n=o.useMemo(l().Layouts.Tab.V1),f=A(),{translate:r,getLabel:c}=L(),[d,t]=o.useState(!0),[s,g]=o.useState({}),{selectors:{getCmsPageIdReducer:C},actions:{upsertCmsPage:a},hooks:{setCmsPageId:b}}=E();o.useEffect(()=>{u?b(u):(g({id:D()}),t(!1))},[]),o.useEffect(()=>{C&&(g(C),t(!1))},[C]);async function T(){await a(s),f.actions.closeDrawer()}return!d&&M(h,{container:!0,children:[e(i,{xs:12,sm:6,title:"CMS Page Details",children:e(y,{label:r(c,"Page Token Title"),value:s.title,field:"title",disabled:!0,validation:[]})}),e(n,{defaultTab:0,tabConfig:[{label:"Details",render:()=>e(V,{cmsPage:{...s},setCmsPage:g})},{label:"CMS JSON",render:()=>e(B,{cmsPage:{...s},setCmsPage:g})}]}),e(h,{style:{marginLeft:"1rem",marginBottom:"1rem"},children:e(p,{color:"primary",onClick:T,value:r(c,"Save"),variant:"outlined"})})]})}function H(){const u=o.useMemo(l().ConfirmationDialog),[p,i]=o.useState(!0),n=o.useMemo(l().Layouts.Table.V2),f=o.useMemo(l().Layouts.Containers.V1);o.useMemo(l().Layouts.Tab.V1);const r=o.useMemo(l().ButtonLoader),{actions:c}=A(),d=G(),{translate:t,getLabel:s}=L(),{selectors:{cmsPagesAdminReducer:g},actions:{getCmsPage:C,deleteCmsPage:a}}=E();o.useEffect(()=>{i(!0),Promise.all([C()]).then(m=>{i(!1)})},[]);function b(){c.openDrawer(!0,e(h,{style:{width:"50vw",display:"flex"},children:e(S,{})}),"right")}function T(m,v){c.openDrawer(!0,e(h,{style:{width:"50vw",display:"flex"},children:e(S,{cmsPageId:v.id})}),"right")}function w(m,v){d.actions.openDialog(!0,e(u,{title:"Duplicate CMS Element",description:`Do you want to duplicate ${v.token} element?`,onConfirm:async()=>{d.actions.closeDialog(),i(!0),i(!1)}}))}function x(m,v){d.actions.openDialog(!0,e(u,{title:"Delete CMS Page",description:`Do you want to delete ${v.title} page?`,onConfirm:async()=>{d.actions.closeDialog(),i(!0),await a(v),i(!1)}}))}return e(h,{container:!0,style:{justifyContent:"center"},children:e(f,{title:"CMS Pages",icon:e(j,{}),xs:12,sm:12,children:e(n,{freeActions:[e(r,{size:"small",value:t(s,"Create Page"),variant:"outlined",onClick:b,startIcon:e(I,{})},1)],isLoading:p,title:"Manage CMS Pages",pageSize:20,...O({}),data:g.cms||[],actions:[m=>({icon:P.Edit,label:"Edit",onClick:T,hidden:!m.project_id}),m=>({icon:P.Delete,label:"Delete",onClick:x,hidden:!m.project_id}),m=>({icon:P.Save,label:"CMS",onClick:w})]})})})}export{H as default};
