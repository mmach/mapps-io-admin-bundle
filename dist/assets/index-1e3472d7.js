import{r as w,b as O,i as k,c as N,R as s,M as R,m as U,h as q,k as D,e as F,u as j,l as B,j as a,G as i,g as E,q as G}from"./index-96500733.js";var u={},z=k,W=N;Object.defineProperty(u,"__esModule",{value:!0});var P=u.default=void 0,$=W(w),H=z(O()),V=(0,H.default)($.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");P=u.default=V;function Q(J){const d=s.useMemo(R().IconButton),m=s.useMemo(()=>U.byName("mapps-component-tooltip").component),M=s.useMemo(R().Image),[o,S]=s.useState([]),{selectors:{userProfileImageReducer:n=n},actions:{removeImage:p=p,setAsProfile:g=g,setLoading:c=c,uploadImage:C=C,getUserImages:f=f}}=q(),{actions:{openLightbox:I=I}}=D(),{selectors:{userProfileReducer:t=t},actions:{getUserInfo:_=_}}=F(),{getLabel:h,translate:v}=j(),{selectors:{authReducer:l=l},actions:{setAuthContext:b=b}}=B();s.useEffect(()=>{S(n.images)},[n.images]);const x=s.useMemo(()=>l.user.id==t.user.id,[t.user.id]);async function y(){let e=await _(t.user.id);e.data.id==l.user.id&&b(e.data)}async function T(e){const r=e.currentTarget.dataset.tag;await p({id:r}),await f({user_id:t.user.id}),await y()}async function A(e){c(!0),await g({blob_id:e.currentTarget.dataset.tag}),await y(),c(!1)}function L(e){o.forEach(r=>{r.id==e.currentTarget.dataset.tag&&I(r,o)})}return a(i,{className:"mapps-user-images-container",style:{display:"flex",flexDirection:"column",placeItems:"center",margin:16},children:a(i,{container:!0,spacing:3,className:"mapps-user-images-list",children:o.map(e=>E(i,{item:!0,xs:2,className:"mapps-user-images-list-item",children:[x&&E(i,{style:{marginBottom:"15px",display:"flex",justifyContent:"right"},children:[e.id!=t.user.blob_id&&x&&a(m,{title:v(h,"USER_SET_AS_PROFILE_IMAGE_TOOLTIP"),children:a(d,{className:"mapps-user-images-list-item-set-as-profile","data-tag":e.id,onClick:A,style:{marginTop:"-3px",cursor:"pointer"},children:a(P,{})})}),a(m,{title:v(h,"USER_REMOVE_IMAGE_TOOLTIP"),children:a(d,{className:"mapps-user-images-list-item-remove-button","data-tag":e.id,style:{cursor:"pointer"},onClick:T,children:a(G,{})})})]}),a(M,{className:"mapps-user-images-list-item-image",animationDuration:1e3,"data-tag":e.id,onClick:L,src:window.env.BLOB_URL+"/blob/"+e.blob_thumbmail_id,style:{cursor:"pointer"}})]},e.id))})})}export{Q as default};
