import{cZ as $,c_ as F,r as x,c$ as k,d0 as I,d1 as q,R as a,M as D,m as P,u as B,y as _,v as E,g as R,G as d,j as e,d2 as W,d4 as Y,d5 as z,T as O}from"./index-96500733.js";import{d as H}from"./index-9e665006.js";const A=t=>{const o={removeDictionary:s=>{t(new k().commandThunt(I.Dictionary.REMOVE_DICTIONARY,s))},addDictionary:s=>t(new k().commandThunt(I.Dictionary.ADD_DICTIONARY,s)),getDictionary:()=>t(new k().queryThunt(q.Dictionary.GET_DICTIONARY,{}))};return{...o,addDictionary:async s=>{await o.addDictionary(s),await o.getDictionary()},removeDictionary:async s=>{await o.removeDictionary(s),await o.getDictionary()}}},K=()=>t=>t.DictionaryAdminReducer.dictionary;function G(){const t=$(),{dictionaryAdminReducer:o}=F(l=>({dictionaryAdminReducer:l.DictionaryAdminReducer})),[s,g]=x.useState(),v=F(K()),C=x.useCallback(A(t).removeDictionary,[t]),h=x.useCallback(A(t).addDictionary,[t]),y=x.useCallback(A(t).getDictionary,[t]);function c(){const l={};return v.forEach(p=>{l[p.type]?l[p.type]++:l[p.type]=1}),l}return{selectors:{dictionaryAdminReducer:o,getAllDictionaryReducer:v},actions:{removeDictionary:C,addDictionary:h,getDictionary:y},state:{dictionaryId:s},hooks:{setDictionaryId:g},functions:{getTypeDictionaries:c}}}function j({translation:t}){const o=a.useMemo(D().Layouts.Groups.V1),s=a.useMemo(()=>P.byName("mapps-component-translate-component").component,[]),g=a.useMemo(D().FormComponents.TextBox),v=a.useMemo(D().FormComponents.DropDownList),C=a.useMemo(D().ButtonLoader),{getPlaceholder:h,getLabel:y,translate:c}=B(),{actions:l}=_(),[p,m]=a.useState(!1),[i,f]=a.useState(t||{id:E()}),{actions:{addDictionary:S},functions:{getTypeDictionaries:b}}=G();function T(r){m(!0),S(i).then(M=>{m(!1),l.closeDrawer()})}function w(r){i.id||(i.id=E()),f({...i,...r})}function L(){return["",...Object.keys(b())].map((r,M)=>({id:r,value:r}))}return R(d,{container:!0,style:{display:"flex"},children:[e(d,{item:!0,xs:6,style:{display:"flex"},children:R(o,{title:"Details",children:[e(v,{label:c(y,"Type"),valueOptions:L(),isRequired:!0,value:i.type,onChange:r=>f({...i,type:r.target.value}),field:"type",validation:[]}),e(g,{onChange:r=>{f({...i,token:r.target.value})},placeholder:c(h,"Code"),isRequired:!0,label:c(y,"Code"),value:i.token,field:"Code",validation:[]}),e(g,{onChange:r=>{f({...i,respStatus:r.target.value})},placeholder:c(h,"Status"),label:c(y,"Status"),value:i.respStatus,field:"Status",validation:[]})]})}),e(d,{item:!0,xs:6,style:{display:"flex"},children:e(o,{title:"Translation",children:e(s,{translation:i||{},setTranslate:w,i:!0})})}),e(d,{style:{marginLeft:"1rem",marginBottom:"1rem"},children:e(C,{color:"primary",onClick:T,value:c(y,"Save"),variant:"outlined",isLoading:p})})]})}function Z(){const[t,o]=a.useState(!0),s=a.useMemo(D().ConfirmationDialog),g=a.useMemo(D().Layouts.Containers.V1),v=a.useMemo(D().Layouts.Table.V2),C=a.useMemo(D().FormComponents.Checkbox),h=a.useMemo(D().ButtonLoader),{actions:y}=_(),{translate:c,getLabel:l}=B(),p=W(),[m,i]=a.useState([]),{selectors:{getAllDictionaryReducer:f},actions:{getDictionary:S,removeDictionary:b},functions:{getTypeDictionaries:T}}=G(),w=a.useMemo(()=>f.filter(n=>m.includes(n.type)).sort((n,u)=>u.code<n.code?1:-1),[f,m]);a.useEffect(()=>{o(!0),Promise.all([S()]).then(n=>{i(Object.keys(T())),o(!1)})},[]);function L(n){const u=n.currentTarget.name;m.includes(u)?i([...m.filter(V=>V!=u)]):i([...m,u])}function r(){y.openDrawer(!0,e(d,{style:{width:"50vw",display:"flex"},children:e(j,{})}),"right")}function M(n,u){y.openDrawer(!0,e(d,{style:{width:"50vw",display:"flex"},children:e(j,{translation:{...u.message,status:u.status}})}),"right")}function N(n,u){p.actions.openDialog(!0,e(s,{title:"Delete Word",description:`Do you want to delete ${u.code} word?`,onConfirm:async()=>{p.actions.closeDialog(),o(!0),await b(u),o(!1)}}))}return e(d,{container:!0,style:{justifyContent:"center"},children:e(g,{title:"Dictionary",icon:e(Y,{}),xs:12,sm:12,children:e(v,{freeActions:[R(d,{container:!0,children:[e(d,{item:!0,xs:2,style:{display:"flex",alignSelf:"center"},children:e(h,{size:"small",value:c(l,"Add Word"),variant:"outlined",onClick:r,startIcon:e(z,{})},1)}),e(d,{container:!0,item:!0,xs:10,style:{flexWrap:"nowrap"},children:Object.entries(T()).map(n=>e(C,{dataKey:n[0],label:`${c(l,n[0])}`,value:m.includes(n[0]),onChange:L,field:n[0],validation:[]},n[0]))})]})],actions:[n=>({icon:O.Edit,label:"Edit",onClick:M}),n=>({icon:O.Delete,label:"Delete",onClick:N})],isLoading:t,title:c(l,"Manage Dictionary"),...H({}),pageSize:20,data:w})})})}export{Z as default};
