import{b as k,Y as x,i as j,Z as T,R as a,bj as P,bk as U,W as q,aq as V,M as v,bl as W,S as B,j as e,G as i,U as u,bm as z,bn as Y,bo as $,l as d}from"./index-ae6bf8ef.js";var f={},G=j,H=T;Object.defineProperty(f,"__esModule",{value:!0});var m=f.default=void 0,J=H(k),N=G(x()),X=(0,N.default)(J.createElement("path",{d:"M21 18v1c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2V5c0-1.1.89-2 2-2h14c1.1 0 2 .9 2 2v1h-9c-1.11 0-2 .9-2 2v8c0 1.1.89 2 2 2h9zm-9-2h10V8H12v8zm4-2.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"AccountBalanceWallet");m=f.default=X;function Z(l){const[I,b]=a.useState(!0),[r,g]=a.useState(new Date),[p,y]=a.useState([]),h=P({}),S=U(),w=q(),A=V(),D=a.useMemo(v().Layouts.Table.V2),O=a.useMemo(v().IUA.PREVIEW.DEFAULT),c=W(),{translate:M,getLabel:F}=B();a.useEffect(()=>()=>c.actions.clean(),[]),a.useEffect(()=>{b(!0),c.actions.getInvoices({year:r.getFullYear(),month:r.getMonth(),asAdmin:!0}).then(t=>{const n=t.data.filter(o=>!h.selectors.iuaReducer.iuaRelations[o.iua.id]).map(o=>o.iua.id);if(b(!1),n.length>0)return h.actions.getIuaList(n)}).then(t=>{if(t&&t.data){const n=[...new Set(t.data.map(o=>o.category_id))];A.hooks.setCategoryIds(n)}})},[r]),a.useEffect(()=>{y([...c.selectors.invoicesAdminReducer.invoices]),console.log(c.selectors.invoicesAdminReducer.invoices)},[c.selectors.invoicesAdminReducer.invoices]);function C(t){const n=t;window.scrollTo(0,0),g(n)}function _(t,n){w.actions.openDrawer(!0,e(i,{container:!0,style:{width:1100},children:e(O,{iua_id:n.iua.id,cmsMode:"DEFAULT",device:"desktop"})}),"right")}function L(t,n){const o=n.id,s=p.filter(E=>E.id==o)[0],R={pdf_id:s.blob.blob_id,subject:M(F,"SEND_MAIL_SUBJECT",s.number_string,s.month+"/"+s.year),body:`${window.env.BLOB_URL}/blob/${s.blob.blob_id}.pdf`};S.actions.openModal(!0,e($,{...R}))}return e(i,{container:!0,style:{justifyContent:"center"},children:e(D,{isLoading:I,icons:u,freeActions:[e(z,{variant:"month",label:"Month",dateFormat:"MM/yyyy",showMonthYearPicker:!0,value:r,onChange:C})],...Y({}),actions:[t=>({icon:u.OpenIn,label:"Open IUA",onClick:_}),t=>({icon:u.PictureAsPdf,label:"Open Invoice",onClick:L})],data:p.sort((t,n)=>new Date(n.createdAt)>new Date(t.createdAt)).map(t=>({...t,info:{number:t.number}})),title:"Invoices List"})})}function Q(){const l=a.useMemo(v().Layouts.Containers.V1);return d(i,{container:!0,style:{justifyContent:"center"},children:[d(l,{title:"TODOOOO",icon:e(m,{}),xs:12,sm:12,children:["TODOOOOOOs",d(i,{children:["Income/Outcome types,",e("br",{}),"Fill auto get incoide or manual invoice flag,",e("br",{}),"Allow to gen manual invoice,",e("br",{}),"Allow edit only manual invoice,",e("br",{}),"link income / outcome invoices,",e("br",{}),"Snapshot for user invoice information values",e("br",{}),"FIX backend to gen invoice based on inputs",e("br",{}),"Socket for invoice status change",e("br",{})]}),e(i,{children:"Income - include fees and tax, Outcome - price with tax"}),e(i,{children:"Calculate summary income for all fees"})]}),e(l,{title:"Invoices",icon:e(m,{}),xs:12,sm:12,children:e(Z,{})})]})}export{Q as default};
